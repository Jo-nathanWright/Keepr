import{r as e,c as t,o as a,a as o,b as s,F as n,d as l,S as r,C as c,t as i,p as d,e as u,u as p,f as g,g as m,h as v,w as f,i as w,j as y,k as b,l as k,m as h}from"./vendor.ac6614a1.js";const _=e({user:{},account:{},profile:{},keeps:[],activeVault:{},activeKeep:[],vaultKeeps:[],profileVaults:[],profileKeeps:[],canDelete:[]});const K={name:"App",setup:()=>({appState:t((()=>_))})};K.render=function(e,t,r,c,i,d){const u=l("Navbar"),p=l("router-view");return a(),o(n,null,[s("header",null,[s(u)]),s("main",null,[s(p)])],64)};class P{static async confirm(e="Are you sure?",t="You won't be able to revert this!",a="warning",o="Yes, delete it!"){try{return!!(await r.fire({title:e,text:t,icon:a,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:o})).isConfirmed}catch(s){return!1}}static toast(e="Warning!",t="warning",a="top-end",o=3e3,s=!0){r.fire({title:e,icon:t,position:a,timer:o,timerProgressBar:s,toast:!0,showConfirmButton:!1})}}const x=window.location.origin.includes("localhost"),V=x?"https://localhost:5001":"";function A(e,t){if(x)console[e](`[${e}] :: ${(new Date).toLocaleTimeString()} :: `,...t);else{switch(e){case"log":case"assert":return}console[e](`[${e}] :: ${(new Date).toLocaleTimeString()} :: `,...t)}}const T={log(){A("log",arguments)},error(){A("error",arguments)},warn(){A("warn",arguments)},assert(){A("assert",arguments)},trace(){A("trace",arguments)}},D=c.create({baseURL:V,timeout:8e3});const E=new class{async createVaultKeep(e){const t=await D.post("api/vaultkeeps",e);T.log(t.data),_.vaultKeeps.push(t.data)}async delete(e){await D.delete("api/vaultkeeps/"+e),_.vaultKeeps=_.vaultKeeps.filter((t=>t.id!==e))}};const I=new class{async getAll(){const e=await D.get("/api/keeps");T.log(e.data),_.keeps=e.data}async getById(e){const t=await D.get("/api/keeps/"+e);T.log(t.data),_.activeKeep=t.data}async Create(e){const t=await D.post("/api/keeps",e);T.log(t.data),_.keeps.push(t.data)}async Delete(e){await D.delete("api/keeps/"+e)}},C={name:"DropDown",props:{vault:{type:Object,required:!0}},setup(){const t=e({newVaultKeep:{},editedKeep:{}});return{state:t,async create(e){try{const a=_.activeKeep;t.newVaultKeep.vaultId=e,t.newVaultKeep.keepId=a.id,await E.createVaultKeep(t.newVaultKeep),P.toast("Added to Vault!"),await I.getAll()}catch(a){P.toast(a)}}}}};C.render=function(e,t,s,n,l,r){return a(),o("a",{class:"dropdown-item",onClick:t[1]||(t[1]=e=>n.create(s.vault.id))},i(s.vault.name),1)};var j=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:C});const O=new class{async getProfile(e){const t=await D.get("api/profiles/"+e);T.log(t.data),_.profile=t.data}async getVaultsByProfile(e){const t=await D.get("api/profiles/"+e+"/vaults");T.log(t.data),T.log("Got vaults"),_.profileVaults=t.data}async getKeepsByProfile(e){const t=await D.get("api/profiles/"+e+"/keeps");T.log(t.data),_.profileKeeps=t.data}};const S=new class{async GetById(e){const t=await D.get("/api/vaults/"+e);T.log(t.data),_.activeVault=t.data}async getKeeps(e){const t=await D.get("/api/vaults/"+e+"/keeps");T.log(t.data),_.vaultKeeps=t.data}async createVault(e){const t=await D.post("api/vaults",e);T.log(t.data),_.profileVaults.push(t.data)}async deleteVault(e){await D.delete("api/vaults/"+e)}};const B={props:{keep:{type:Object,required:!0}},setup(){const a=p(),o=e({editedKeep:{}});return g((async()=>{void 0!==a.params.vaultId?_.canDelete=!0:_.canDelete=!1})),{state:o,account:t((()=>_.account)),activeKeep:t((()=>_.activeKeep)),vaults:t((()=>_.profileVaults)),vault:t((()=>_.activeVault)),canDelete:t((()=>_.canDelete)),async destroy(e,t,a){try{await P.confirm()&&(await I.Delete(e),await I.getAll(),await O.getKeepsByProfile(t),P.toast("That keep has been Deleted"),void 0!==a&&await S.getKeeps(a))}catch(o){P.toast(o,"error")}},async removeKeep(e,t){try{await P.confirm()&&(await E.delete(e),P.toast("That keep has been Removed"),await S.getKeeps(t))}catch(a){P.toast(a,"error")}},async getVaults(e){try{await O.getVaultsByProfile(e)}catch(t){P.error(t)}},async getKeepId(e){try{await I.getById(e)}catch(t){P.toast(t)}}}}},L=f("data-v-515aa29d");d("data-v-515aa29d");const R={class:"card-img-overlay text-light d-flex align-items-end justify-content-between"},H={class:"card-title"},z={class:"modal-dialog modal-lg modal-dialog-centered"},U={class:"modal-content"},$={class:"row justify-md-content-around justify-content-center"},Y={class:"col-md-6 col-11 my-2 d-flex align-items-center"},q={class:"col-md-5 col-11 d-flex flex-column justify-content-between my-3"},M={key:0,class:"d-flex justify-content-end"},W={class:" border-bottom border-dark mb-2"},N={class:"text-center mt-4"},F={class:"text-center mt-4"},G={class:"my-4"},J={key:0,class:"d-flex justify-content-between"},Q=s("button",{type:"button",class:"btn btn-outline-success dropdown-toggle","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}," Add to Vault ",-1),X={class:"dropdown-menu"},Z={key:1,class:"d-flex justify-content-around align-items-center"};u();const ee=L(((e,t,r,c,d,u)=>{const p=l("DropDown"),g=l("router-link");return a(),o(n,null,[s("div",{class:"card zinx","data-toggle":"modal","data-target":"#m"+r.keep.id,onClick:t[1]||(t[1]=e=>c.getKeepId(r.keep.id))},[s("img",{class:"card-img-top",src:r.keep.img,alt:"Card image cap"},null,8,["src"]),s("div",R,[s("h5",H,i(r.keep.name),1),s("img",{class:"image rounded-circle",src:r.keep.creator.picture,alt:r.keep.creator.name},null,8,["src","alt"])])],8,["data-target"]),s("div",{class:"modal fade bd-example-modal-lg",id:"m"+r.keep.id,tabindex:"-1",role:"dialog","aria-labelledby":"myLargeModalLabel","aria-hidden":"true"},[s("div",z,[s("div",U,[s("div",$,[s("div",Y,[s("img",{class:"card-img-top keepImage rounded",src:r.keep.img,alt:"Card image cap"},null,8,["src"])]),s("div",q,[!0===c.canDelete&&c.vault.creatorId===c.account.id?(a(),o("div",M,[s("h5",{class:"action",onClick:t[2]||(t[2]=e=>c.removeKeep(r.keep.vaultKeepId,c.vault.id)),"data-toggle":"modal",title:"Remove Keep","data-target":"#m"+r.keep.id}," ❌ ",8,["data-target"])])):m("",!0),s("div",W,[s("div",N,i(c.activeKeep.views)+" Views "+i(c.activeKeep.keeps)+" Keeps ",1),s("div",F,[s("h3",null,i(r.keep.name),1)]),s("div",G,[s("p",null,i(r.keep.description),1)])]),s("div",null,[null!=c.account.id?(a(),o("div",J,[s("div",{class:"btn-group dropup",onClick:t[3]||(t[3]=e=>c.getVaults(c.account.id))},[Q,s("div",X,[(a(!0),o(n,null,v(c.vaults,(e=>(a(),o(p,{key:e.id,vault:e},null,8,["vault"])))),128))])]),c.account.id===r.keep.creatorId?(a(),o("h5",{key:0,class:"d-flex align-self-center action",onClick:t[4]||(t[4]=e=>c.destroy(r.keep.id,c.account.id,c.vault.id)),"data-toggle":"modal","data-target":"#m"+r.keep.id,title:"Delete Keep"}," 🗑 ",8,["data-target"])):m("",!0),s(g,{to:{name:"Profile",params:{id:r.keep.creatorId}}},{default:L((()=>[s("img",{class:"rounded-circle image mr-2",src:r.keep.creator.picture,alt:"keep.creator.name","data-dismiss":"modal"},null,8,["src"])])),_:1},8,["to"])])):(a(),o("div",Z,[s("h5",null,i(r.keep.creator.name),1),s(g,{to:{name:"Profile",params:{id:r.keep.creatorId}}},{default:L((()=>[s("img",{class:"rounded-circle image mr-2",src:r.keep.creator.picture,alt:"keep.creator.name","data-dismiss":"modal"},null,8,["src"])])),_:1},8,["to"])]))])])])])])],8,["id"])],64)}));B.render=ee,B.__scopeId="data-v-515aa29d";var te=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:B});let ae;const oe={},se=function(e,t){if(!t||0===t.length)return e();if(void 0===ae){const e=document.createElement("link").relList;ae=e&&e.supports&&e.supports("modulepreload")?"modulepreload":"preload"}return Promise.all(t.map((e=>{if(e in oe)return;oe[e]=!0;const t=e.endsWith(".css"),a=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${a}`))return;const o=document.createElement("link");return o.rel=t?"stylesheet":ae,t||(o.as="script",o.crossOrigin=""),o.href=e,document.head.appendChild(o),t?new Promise(((e,t)=>{o.addEventListener("load",e),o.addEventListener("error",t)})):void 0}))).then((()=>e()))};function ne(e){return()=>function(e){switch(e){case"./pages/AboutPage.vue":return se((()=>import("./AboutPage.a9fe462c.js")),["/assets/AboutPage.a9fe462c.js","/assets/vendor.ac6614a1.js"]);case"./pages/HomePage.vue":return se((()=>import("./HomePage.ec1a923d.js")),["/assets/HomePage.ec1a923d.js","/assets/HomePage.76007ecf.css","/assets/vendor.ac6614a1.js"]);case"./pages/ProfilePage.vue":return se((()=>import("./ProfilePage.abbab77e.js")),["/assets/ProfilePage.abbab77e.js","/assets/ProfilePage.3db2411d.css","/assets/vendor.ac6614a1.js"]);case"./pages/VaultsPage.vue":return se((()=>import("./VaultsPage.b8e53233.js")),["/assets/VaultsPage.b8e53233.js","/assets/VaultsPage.e89c0642.css","/assets/vendor.ac6614a1.js"]);default:return Promise.reject(new Error("Unknown variable dynamic import: "+e))}}(`./pages/${e}.vue`)}const le=[{path:"/",name:"Home",component:ne("HomePage"),beforeEnter:b},{path:"/about",name:"About",component:ne("AboutPage")},{path:"/profile/:id",name:"Profile",component:ne("ProfilePage"),beforeEnter:b},{path:"/vault/:vaultId",name:"Vault",component:ne("VaultsPage"),beforeEnter:b}],re=w({linkActiveClass:"router-link-active",linkExactActiveClass:"router-link-exact-active",history:y(),routes:le});const ce=new class{async getAccount(){try{const e=await D.get("/account");_.account=e.data}catch(e){T.error("HAVE YOU STARTED YOUR SERVER YET???",e)}}},ie=k({domain:"codeworks-jonathan.us.auth0.com",clientId:"DLuOHJT5ppl6RF22KJWztSrmtYe1BjSe",audience:"https://mainApi.com",useRefreshTokens:!0,onRedirectCallback:e=>{re.push(e&&e.targetUrl?e.targetUrl:window.location.pathname)}});async function de(e){if(!ie.isAuthenticated)return e;const t=1e3*ie.identity.exp,a=t<Date.now(),o=t<Date.now()+432e5;return a?await ie.loginWithPopup():o&&(await ie.getTokenSilently(),D.defaults.headers.authorization=ie.bearer),e}ie.on(ie.AUTH_EVENTS.AUTHENTICATED,(async function(){D.defaults.headers.authorization=ie.bearer,D.interceptors.request.use(de),_.user=ie.user,await ce.getAccount()}));const ue={setup:()=>({state:e({dropOpen:!1}),user:t((()=>_.user)),account:t((()=>_.account)),async login(){ie.loginWithPopup()},async logout(){ie.logout({returnTo:window.location.origin})}})},pe=f("data-v-7c8f95a5");d("data-v-7c8f95a5");const ge={class:"navbar navbar-expand-lg navbar-info bg-info"},me=s("div",{class:"d-flex flex-column align-items-center"},[s("img",{alt:"logo",src:"/assets/K_FinalP.ea41b7c2.png",height:"45"})],-1),ve=s("button",{class:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarText","aria-controls":"navbarText","aria-expanded":"false","aria-label":"Toggle navigation"},[s("span",{class:"navbar-toggler-icon"})],-1),fe={class:"collapse navbar-collapse",id:"navbarText"},we=s("ul",{class:"navbar-nav mr-auto"},null,-1),ye={class:"navbar-text"},be={key:1,class:"dropdown"},ke={class:"mx-3"},he=s("div",{class:"list-group-item list-group-item-action hoverable"}," Account ",-1);u();const _e=pe(((e,t,n,r,c,d)=>{const u=l("router-link");return a(),o("nav",ge,[s(u,{class:"navbar-brand d-flex",to:{name:"Home"}},{default:pe((()=>[me])),_:1}),ve,s("div",fe,[we,s("span",ye,[r.user.isAuthenticated?(a(),o("div",be,[s("div",{class:"dropdown-toggle",onClick:t[2]||(t[2]=e=>r.state.dropOpen=!r.state.dropOpen)},[s("img",{src:r.user.picture,alt:"user photo",height:"40",class:"rounded"},null,8,["src"]),s("span",ke,i(r.user.name),1)]),s("div",{class:["dropdown-menu p-0 list-group w-100",{show:r.state.dropOpen}],onClick:t[4]||(t[4]=e=>r.state.dropOpen=!1)},[s(u,{to:{name:"Profile",params:{id:r.account.id}}},{default:pe((()=>[he])),_:1},8,["to"]),s("div",{class:"list-group-item list-group-item-action hoverable",onClick:t[3]||(t[3]=(...e)=>r.logout&&r.logout(...e))}," logout ")],2)])):(a(),o("button",{key:0,class:"btn btn-outline-dark text-uppercase",onClick:t[1]||(t[1]=(...e)=>r.login&&r.login(...e))}," Login "))])])])}));ue.render=_e,ue.__scopeId="data-v-7c8f95a5";var Ke=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:ue});const Pe={props:{vault:{type:Object,required:!0}},setup:e=>(g((async()=>{try{await S.GetById(e.vault.id)}catch(t){P.toast(t)}})),{account:t((()=>_.account))})},xe=f("data-v-e153448c");d("data-v-e153448c");const Ve={class:"card"},Ae={class:"card-img-overlay text-light d-flex align-items-end justify-content-between"},Te={class:"card-title"};u();const De=xe(((e,t,n,r,c,d)=>{const u=l("router-link");return a(),o(u,{to:{name:"Vault",params:{vaultId:n.vault.id}}},{default:xe((()=>[s("div",null,[s("div",Ve,[s("img",{class:"card-img-top",src:n.vault.img,alt:"Card image cap"},null,8,["src"]),s("div",Ae,[s("h5",Te,i(n.vault.name),1)])])])])),_:1},8,["to"])}));Pe.render=De,Pe.__scopeId="data-v-e153448c";var Ee=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Pe});const Ie=h(K);!function(e){const t={"./components/DropDown.vue":j,"./components/KeepCard.vue":te,"./components/Navbar.vue":Ke,"./components/VaultCard.vue":Ee};Object.entries(t).forEach((([t,a])=>{const o=a.name||t.substr(t.lastIndexOf("/")+1).replace(/\.\w+$/,"");e.component(o,a.default)}))}(Ie),Ie.use(re).mount("#app");export{_ as A,P,I as k,O as p,S as v};
